

<div id="win" layout="column" style=" height: 100%;" ng-click="clickClose(); clickRelacionClose();">
  <md-toolbar layout="row" >
    <div class="md-toolbar-tools" >

      <h1>Activos Informaticos &nbsp; </h1>
      <!-- <div ng-show="clicked" class="cerrar-menu-activo" ng-class="{'mostrar-menu-activo animated bounceInLeft': clicked }">

            <md-button aria-label="Abrir" class="md-icon-button" ng-click="goAsset($event, clicked_asset, clicked_index); $event.stopPropagation();">
              <md-tooltip md-direction="bottom"> Ver </md-tooltip>
              <md-icon md-font-set="material-icons">visibility</md-icon>
            </md-button>
            <md-button aria-label="Editar"  class="md-icon-button" ng-click="editAsset($event, clicked_asset, clicked_index); $event.stopPropagation();">
              <md-tooltip md-direction="bottom"> Editar </md-tooltip>
              <md-icon md-font-set="material-icons">edit</md-icon>
            </md-button>
            <md-button aria-label="Borrar"  class="md-icon-button"ng-click="deleteAsset($event, clicked_asset, clicked_index); $event.stopPropagation();">
              <md-tooltip md-direction="bottom"> Borrar </md-tooltip>
              <md-icon md-font-set="material-icons">delete</md-icon>
            </md-button>
            <md-button aria-label="Relacionar" class="md-icon-button" ng-click="addRelation($event,'3', clicked_asset); $event.stopPropagation();">
              <md-tooltip md-direction="bottom"> Relacionar </md-tooltip>
              <md-icon md-font-set="material-icons">link</md-icon>
            </md-button>
      </div>
      <div ng-show="clickedR" class="cerrar-menu-activo" ng-class="{'mostrar-menu-activo animated bounceInLeft': clickedR }">

            <md-button aria-label="Abrir" class="md-icon-button" ng-click="goRelation($event, clicked_relation, clicked_RelationIndex); $event.stopPropagation();">
              <md-tooltip md-direction="bottom"> Ver </md-tooltip>
              <md-icon md-font-set="material-icons">visibility</md-icon>
            </md-button>
            <md-button aria-label="Editar"  class="md-icon-button" ng-click="editRelation($event, clicked_relation, clicked_RelationIndex); $event.stopPropagation();">
              <md-tooltip md-direction="bottom"> Editar </md-tooltip>
              <md-icon md-font-set="material-icons">edit</md-icon>
            </md-button>
            <md-button aria-label="Borrar"  class="md-icon-button"ng-click="deleteRelation($event, clicked_relation, clicked_RelationIndex, select_asset._id); $event.stopPropagation();">
              <md-tooltip md-direction="bottom"> Borrar </md-tooltip>
              <md-icon md-font-set="material-icons">delete</md-icon>
            </md-button>

      </div> -->


      <span flex=""></span>



      <md-menu md-position-mode="target-right target">
        <md-button class="md-icon-button" aria-label="Opciones" ng-click="openMenu($mdOpenMenu, $event)">
          <md-icon md-menu-origin="" md-font-set="material-icons">settings</md-icon>
        </md-button>

        <md-menu-content width="1">
          <md-menu-item>
            <md-button ng-click="go('/admin')">
              <md-icon md-font-set="material-icons" md-menu-align-target="" >build</md-icon>
              Administraci√≥n
            </md-button>
          </md-menu-item>
        </md-menu-content>

      </md-menu>
    </div>
  </md-toolbar>
  <div layout="row" flex>
    <!-- <md-sidenav layout="column" class="md-sidenav-left md-whiteframe-4dp" md-component-id="left" md-is-locked-open="$mdMedia('gt-sm')">
      <md-button class="md-accent">Mis activos</md-button>
      <md-button class="md-accent">Compartidos</md-button>
    </md-sidenav> -->
    <div layout="column" flex id="content">
      <md-content layout="column" flex class="md-padding" layout="column" flex="100">

          <md-content layout="column" flex="100">
            <md-tabs md-border-bottom="" layout="column" flex="100">

              <md-tab label="Activos">
                <md-content class="md-padding">

                  <div class="" layout="row" layout-align="center center ">
                    <div layout="row" >
                      <md-input-container class=" md-block" style="width: 400px;">
                        <md-icon style="bottom:28px;" md-font-set="material-icons" aria-label="nombre tipo activo">search</md-icon>
                        <input ng-model="buscadoString" type="text" placeholder="Ingrese palabra a buscar" ng-disabled="busquedaAvanzada">
                      </md-input-container>
                      <div class="">
                        <md-button ng-click="busqueda(buscadoString,false)">
                          Buscar
                        </md-button>
                        <md-button ng-click="showAdvSearch($event)">
                          Avanzada
                        </md-button>
                      </div>
                    </div>
                  </div>

                  <div layout="row" layout-sm="column" layout-align="space-around" ng-if="buscando" >
                    <md-progress-circular md-mode="indeterminate" md-diameter="106"></md-progress-circular>
                  </div>

                  <p class="md-block" ng-if="myassets.length==0" style="margin-top:20px; margin-bottom:20px; padding-left:35px; padding-top:20px;"> No se encontraron resultados </p>

                  <div layout="row" layout-wrap layout-margin layout-align="start center" ng-if="!buscando" ng-cloak>

                    <!--div style="min-width: 15%; cursor:pointer; cursor: hand" layout="column" layout-align="center" ng-repeat="asset in myassets" ng-click="goAsset($event, asset, $index)"-->
                    <div style="min-width: 15%; cursor:pointer; cursor: hand" layout="column" layout-align="center" ng-repeat="asset in myassets" ng-click="clickAsset(asset, $index);  $event.stopPropagation();" ng-dblclick="goAsset($event, clicked_asset, clicked_index)">
                             <!--img src="images/nota.svg"/-->
                      <md-icon style="font-size: 48px; width: 50px;height: 50px;" ng-class="{'select-activo animated pulse': clickedIcon($index) }"  md-font-set="material-icons">description</md-icon>
                      <div style="text-align: center"> {{asset.name}} </div>
                    </div>
                  </div>

                </md-content>
              </md-tab>

              <md-tab label="Relaciones">
                <div >
                  <div layout="column">
                    <div layout="row" layout-align="space-between center" style="padding-top:20px;">
                      <h1 class="md-display-2" ng-show="direccionRelaciones=='Todas'">Todas las relaciones</h1>
                      <h1 class="md-display-2" ng-show="direccionRelaciones=='Salientes'">Relaciones salientes</h1>
                      <h1 class="md-display-2" ng-show="direccionRelaciones=='Entrantes'">Relaciones entrantes</h1>
                      <md-input-container style="margin-top:0px; margin-bottom:0px; top:8px; padding-right:36px; width:280px;">
                        <!-- <md-switch ng-model="direccionRelaciones" ng-change="searchRelations(select_asset._id,select_asset.name)">Relaciones salientes/entrantes</md-switch> -->
                        <label>Filtro de relaciones</label>
                        <md-icon md-font-set="material-icons" >filter_list</md-icon>
                        <!-- <md-select ng-model="direccionRelaciones" aria-label="filtro relaciones" md-on-close="searchRelations(select_asset._id,select_asset.name)"> -->
                        <md-select ng-model="direccionRelaciones" aria-label="filtro relaciones" ng-change="searchRelations(select_asset._id,select_asset.name)" ng-disabled="!select_asset">
                          <md-option ng-repeat="filtro in filtros" value="{{filtro}}" >
                              {{filtro}}
                          </md-option>
                        </md-select>
                      </md-input-container>
                    </div>

                  </div>

                  <p style="margin-top:20px; margin-bottom:20px;"> Seleccione un activo de la lista para ver las relaciones en las que participa </p>
                  <div layout="column">
                    <div layout="row" style="min-height: 600px;">

                      <md-sidenav class="md-sidenav-left " md-component-id="left" md-is-locked-open="$mdMedia('gt-sm')" style="min-width: 25% !important; width: 700px; ">
                        <md-input-container class="md-icon-float md-block" style="top: 20px;">
                          <input type="search" ng-model="buscado" placeholder="Activos" aria-label="filter assets" />
                        </md-input-container>

                        <md-list ng-cloak>
                          <md-list-item ng-repeat="asset in myassets | filter:buscado" ng-click="searchRelations(asset._id,asset.name)" ng-class="{'select-activo animated flash': clickedIcon($index) }">

                            <p>{{ asset.name }}</p>

                            <md-divider ng-if="!$last"></md-divider>
                          </md-list-item>
                        </md-list>
                      </md-sidenav>

                      <div layout="column" flex id="content" style="width: 1000px; " >
                        <div layout="row" layout-sm="column" layout-align="space-around" ng-if="buscando" >
                          <md-progress-circular md-mode="indeterminate" md-diameter="106"></md-progress-circular>
                        </div>
                        <div layout="row" layout-wrap layout-margin layout-align="start center" style="margin-left:20px; " >

                          <!--div style="min-width: 15%; cursor:pointer; cursor: hand" layout="column" layout-align="center" ng-repeat="asset in myassets" ng-click="goAsset($event, asset, $index)"-->
                          <div ng-show="!buscando" style="min-width: 15%; cursor:pointer; cursor: hand" layout="column" layout-align="center" ng-repeat="relation in assetRelations" ng-click="clickRelation(relation, $index);  $event.stopPropagation();" ng-dblclick="goRelation($event, relation, sourceAssetId, $index)">
                            <md-icon style="font-size: 48px; width: 50px;height: 50px;" ng-class="{'select-relacion animated pulse': clickedRelacionIcon($index) }"  md-font-set="material-icons">link</md-icon>
                            <!-- <div style="text-align: center" ng-show="direccionRelaciones=='Todas'"> {{labels[$index] || relation.relationTypeId }} </div> -->
                            <!-- <div style="text-align: center" ng-show="direccionRelaciones=='Salientes'"> {{labels[$index].outLabel || relation.relationTypeId }} </div> -->
                            <div style="text-align: center" > {{labels[$index] || relation.relationTypeId }} {{relatedAssets[$index]}} </div>
                            <!-- <div style="text-align: center" ng-show="direccionRelaciones=='Entrantes'"> {{labels[$index].inLabel || relation.relationTypeId }} </div> -->
                          </div>
                        </div>
                      </div>

                    </div>
                  </div>

                </div>
              </md-tab>
              <md-tab label="Mapa">
                <md-content class="md-padding">
                  <h1 class="md-display-2">Mapa de relaciones</h1>

                  <p style="margin-top:20px; margin-bottom:20px;"> Seleccione un activo de la lista para ver las relaciones en las que participa </p>
                  <div layout="row" flex>
                    <md-sidenav layout="column" class="md-sidenav-left " md-component-id="left" md-is-locked-open="$mdMedia('gt-sm')" style="min-width: 25% !important;">
                      <md-input-container class="md-icon-float md-block" style="top: 20px;">
                        <input type="search" ng-model="buscado" placeholder="Activos" aria-label="filter" />
                      </md-input-container>
                      <md-list ng-cloak>

                        <md-list-item ng-repeat="asset in myassets | filter:buscado" ng-click="goToMap(asset,$index,profundidad)" ng-class="{'select-activo animated pulse': clickedIcon($index) }">

                          <p>{{ asset.name }}</p>

                          <md-divider ng-if="!$last"></md-divider>
                        </md-list-item>
                      </md-list>
                    </md-sidenav>
                    <div class="" flex>

                      <div class="" layout-align="end end" layout="row" style="">
                        <md-input-container class="" style="margin-bottom:0px;height:40px;padding-right:40px;padding-bottom:0px;">
                          <input ng-model="profundidad" ng-pattern="/^[0-9]$/" type="number" placeholder="Ingrese profundidad" >
                        </md-input-container>
                        <!-- <md-button type="button" style="margin-bottom:0px;" ng-click="goToMap(asset,$inde)">Aplicar</md-button> -->

                        <md-input-container class="" ng-show="svgExist" style="margin-bottom:0px;height:40px;">
                          <input id="search" ng-model="buscado2" type="text" placeholder="Ingrese nombre de activo" >
                        </md-input-container>
                        <md-button type="button" style="margin-bottom:0px;" ng-show="svgExist" ng-click="searchNode()">Buscar</md-button>
                      </div>
                      <div id="relGraph">

                      </div>

                    </div>

                  </div>
                </md-content>
              </md-tab>
            </md-tabs>
          </md-content>
        </div>

      </md-content>

      <ul mfb-menu menu-state="myVar" position="br" effect="slidein" active-icon="ion-close" resting-icon="ion-plus" toggling-method="click" >
        <!--a mfb-button mfb-button-close icon="ion-android-list" label="Nuevo tipo de activo" ng-click="showAddAssetType($event)" >  </a-->
        <a mfb-button mfb-button-close icon="ion-link" label="Nueva relacion" ng-click="addRelation($event,'1',null)" >  </a>
        <a mfb-button mfb-button-close icon="ion-ios-paper" label="Nuevo activo" ng-click="showAddAsset($event)" >  </a>
      </ul>

  </div>
  <!-- Angular Material Dependencies -->

</div>
