<md-dialog aria-label="Editar Activo" ng-cloak style="width: 800px; ">
	<md-toolbar layout="row">
	  <div class="md-toolbar-tools">

	    <h1> {{asset.name}} - Tipo: {{asset_type.name}} &nbsp; </h1>

	  </div>

      <md-button class="md-icon-button" style="top: 7px;" ng-click="editAsset(ev,asset,indice,indexBusqueda)">
      	<md-tooltip md-direction="bottom"> Editar </md-tooltip>
	    <md-icon md-font-set="material-icons" aria-label="Edit asset">edit</md-icon>
	  </md-button>

	  <md-button class="md-icon-button" style="top: 7px;" ng-click="cancel()">
	    <md-icon md-font-set="material-icons" aria-label="Close dialog">close</md-icon>
	  </md-button>
	</md-toolbar>

	<div layout="column" flex id="content">
		<md-content layout="column" flex class="md-padding">

				<md-tabs md-dynamic-height="" md-border-bottom="">
						<md-tab label="Descripción">

							<!-- <div style="overflow: auto;"> -->
							<div >
								<h1 class="md-display-2" style="padding-left: 20px;">Comentarios</h1>
							    <p style="padding-left: 20px; padding-bottom: 30px;"> {{asset.comment}} </p>
							    <md-divider ></md-divider>
							    <h1 class="md-display-2" style="padding-left: 20px;">Atributos</h1>

							    <md-list-item ng-repeat="key in keys" style="height:60px;">
							    	<md-icon md-font-set="material-icons" class="attributes" style="padding-left: 20px; padding-bottom: 20px;">settings_input_component</md-icon>
							        <strong style="padding-left: 20px; padding-bottom: 20px;"> {{key}}: </strong>
							        <p style="padding-left: 20px; padding-bottom: 20px;">{{asset[key]}} </p>

							    </md-list-item>
									<div layout="row" style="padding-bottom: 30px; padding-left: 16px; padding-top: 16px;">
							    	<md-icon md-font-set="material-icons" style="margin-right: 32px; margin-left: 0px; padding-left: 20px; padding-right: 20px;">panorama_fish_eye</md-icon>
							    	<strong style="padding-left: 20px;padding-top: 2px;">Estado actual: </strong>
							    	<p ng-class="{'estado-final': esFinal }" class="estado-actual" style="padding-left: 20px; padding-top: 2px;">{{asset.estadoActual}}</p>
							    </div>

							    <div layout="column" ng-repeat="lista in listas" style=" overflow: auto;">

									    <md-divider></md-divider>

									    	<h2 class="md-display-2" style="padding-left: 20px;">Lista: {{lista.name}} </h2>

									    <div style="min-height: 100px;">
											<md-list-item ng-repeat="element in lista.elements" style="height:60px;" >
											    	<md-icon md-font-set="material-icons" class="attributes" style="padding-left: 20px; padding-bottom: 20px;">list</md-icon>
											        <p style="padding-left: 20px; padding-bottom: 20px;">{{element.content}} </p>
											</md-list-item>

										</div>
								</div>

								<md-divider></md-divider>
								<h1 class="md-display-2" style="padding-left: 20px;">Tags</h1>
								<div style="padding-left: 16px; padding-top: 10px; ">
									<md-chips ng-model="asset.tags" readonly="true" style="padding-bottom: 30px;"></md-chips>
								</div>

								<md-divider></md-divider>
								<h1 class="md-display-2" style="padding-left: 20px;">Contacto</h1>
								<div layout="row" style="padding-bottom: 30px; padding-top: 14px;">
								    <md-icon md-font-set="material-icons" style="margin-right: 32px; margin-left: 0px; padding-left: 36px; padding-right: 20px; ">person</md-icon>
								    <strong style="padding-left: 20px; padding-top: 4px;">Nombre: </strong>
								    <p style="padding-left: 20px; padding-top: 4px;"> {{asset.stakeholders.name}}</p>
							    </div>
							    <div layout="row" style="padding-bottom: 30px;">
								    <md-icon md-font-set="material-icons" style="margin-right: 32px; margin-left: 0px; padding-left: 36px; padding-right: 20px; ">email</md-icon>
								    <strong style="padding-left: 20px; padding-top: 4px;">Email: </strong>
								    <p style="padding-left: 20px; padding-top: 4px;"> {{asset.stakeholders.email}}</p>
							    </div>

								<md-divider></md-divider>
								<h1 class="md-display-2" style="padding-left: 20px;">Informacion Adjunta</h1>

								<md-list-item ng-repeat="link in asset.attached" style="height:60px;" >
								    <!--{{ d.label}}-->
								      	<md-icon md-font-set="material-icons" class="attributes" style="padding-left: 20px; padding-bottom: 20px; margin-left: 0px;">attach_file</md-icon>
								        <a href="{{link}}" style="padding-left: 20px; padding-bottom: 20px;">{{link}} </a>

								</md-list-item>



							</div>

						</md-tab>
						<md-tab label="Mapa">
							<md-content class="md-padding">
								<!-- <h1 class="md-display-2">Mapa de relaciones</h1> -->
								<div layout="row" flex>

									<div class="" flex>

										<div class="" layout-align="end end" layout="row" style="">
											<md-input-container class="" style="margin-bottom:0px;height:40px;padding-right:40px;padding-bottom:0px;">
												<input ng-model="profundidad" ng-pattern="/^[0-9]$/" type="number" placeholder="Ingrese profundidad" >
											</md-input-container>
											<md-button type="button" style="margin-bottom:0px;" ng-click="goToMap(asset,indice,profundidad)">Aplicar</md-button>

											<md-input-container class="" ng-show="$parent.svgExist" style="margin-bottom:0px;height:40px;">
												<input id="search" ng-model="buscado2" type="text" placeholder="Ingrese nombre de activo" >
											</md-input-container>
											<md-button type="button" style="margin-bottom:0px;" ng-show="svgExist" ng-click="searchNode()">Buscar</md-button>
										</div>
										<div id="relGraph">

										</div>

									</div>

								</div>
							</md-content>
						</md-tab>
						<md-tab label="Relaciones">
							<h1 class="md-display-2" style="padding-left: 20px;" ng-show="!direccionRelaciones">Relaciones salientes</h1>
							<h1 class="md-display-2" style="padding-left: 20px;" ng-show="direccionRelaciones">Relaciones entrantes</h1>
							<md-input-container style="margin-top:0px; left:20px;">
								<md-switch ng-model="direccionRelaciones">Relaciones salientes/entrantes</md-switch>
							</md-input-container>
							<!-- <table ng-table="tableParams" class="table" show-filter="true" style="padding-top:20px;"> -->
							<div style="padding-top:20px; padding-bottom:20px; " ng-show="!direccionRelaciones" layout="row" flex layout-align="center center">
								<table>
									<tr>
										<td style="width:200px;"> <strong> Relación <strong> </td>
										<td style="width:200px;"> <strong> Activo relacionado</strong> </td>
										<td style="width:200px;"><strong>Crítica</strong></td>
									</tr>
							    <tr ng-repeat="relation in relationsTree.relations">
							        <td  style="width:200px;cursor:pointer; cursor: hand" ng-click="goRelation($event,relationsOut[$index],asset._id,$index)">
							            <a>{{relation.outLabel}}</a></td>
							        <td  style="width:200px;cursor:pointer; cursor: hand" ng-click="callGoAsset($event,relation.relatedAsset)">
							            <a>{{relation.relatedAsset.name}}</a></td>
											<td  style="width:200px;" ng-class="{'critico': criticosOut[$index].valor }">
									        {{criticosOut[$index].texto}}</td>
											<!-- <td title="'Crítico'" filter="{ isCritical: 'bool'}" sortable="'isCritical'">
									        {{user.age}}</td> -->
							    </tr>
								</table>
							</div>
							<div style="padding-top:20px; " ng-show="direccionRelaciones" layout="row" flex layout-align="center center">
								<table>
									<tr>
										<td style="width:200px;"> <strong> Relación <strong> </td>
										<td style="width:200px;"> <strong> Activo relacionado</strong> </td>
										<td style="width:200px;"><strong>Crítica</strong></td>
									</tr>
							    <tr ng-repeat="relation in relationsTree.incomingRelations">
							        <td  style="width:200px; cursor:pointer; cursor:hand" ng-click="goRelation($event,relationsIn[$index],asset._id,$index)">
							            <a>{{relation.inLabel}}</a></td>
							        <td  style="width:200px;cursor:pointer; cursor: hand" ng-click="callGoAsset($event,relation.relatedAsset)">
							            <a>{{relation.relatedAsset.name}}</a></td>
											<td  style="width:200px;"  ng-class="{'critico': criticosIn[$index].valor}">
									        {{criticosIn[$index].texto}}</td>
											<!-- <td title="'Crítico'" filter="{ isCritical: 'bool'}" sortable="'isCritical'">
									        {{user.age}}</td> -->
							    </tr>
								</table>
							</div>

						</md-tab>
						<md-tab label="Ciclo de vida">
							<md-content class="md-padding">
								<h1 class="md-display-2">Ciclo de vida</h1>
								<div class="" layout="row" flex layout-align="center center">
									<img data-ng-src="data:image/png;base64,{{lifeCycleGraph.graph}}"> </img>
								</div>
							</md-content>
						</md-tab>

						<md-tab label="Historial">
							<md-content class="md-padding">
								<h1 class="md-display-2" ng-show="!showVersion">Historial de versiones</h1>
								<div layout="row" layout-align="space-between center" ng-show="showVersion">
									<h3 class="md-display-2" >Versión seleccionada</h3>
									<div class="" >
										<md-button class="md-icon-button" style="top: 7px;" ng-click="confirmRestoreVersion($event,sel_version.asset)">
											<md-tooltip md-direction="bottom"> Restaurar </md-tooltip>
											<md-icon md-font-set="material-icons" class="select-activo" aria-label="restore">restore</md-icon>
										</md-button>
										<md-button class="md-icon-button" style="top: 7px;" ng-click="closeVersion()">
											<md-tooltip md-direction="bottom"> Volver </md-tooltip>
											<md-icon md-font-set="material-icons" aria-label="close">exit_to_app</md-icon>
										</md-button>
									</div>
								</div>

								<!-- <h3 class="md-display-1" style="padding-top:20px; " ng-show="showVersion">Fecha {{sel_version.date}}</h3>
								<md-divider></md-divider> -->
								<div style="padding-top:20px; " ng-show="!showVersion">

									<md-list-item ng-repeat="version in assetVersions" ng-click="goToVersion(version.idVersion,$index)">
										<md-icon md-font-set="material-icons" style="margin-bottom:16px;">receipt</md-icon>
										<!--img alt="{{ person.name }}" ng-src="{{ person.img }}" class="md-avatar" /-->
										<p ng-show="$index != 0">Versión: {{ version.idVersion }} - Fecha: {{ version.date }}</p>
										<p ng-show="$index == 0">Versión actual - Fecha: {{ version.date }}</p>
										<!-- <md-icon md-font-set="material-icons" aria-label="Open Chat" class="md-secondary md-hue-3" style="top:10px;" ng-click="confirmRestoreVersion($event,sel_version.asset)">restore_page</md-icon> -->
										<md-divider ng-if="!$last"></md-divider>
									</md-list-item>

								</div>

								<div style="padding-top:20px; " overflow="auto" ng-show="showVersion">
									<md-divider></md-divider>
									<h1 class="md-display-1" style="padding-left: 20px;">Versión</h1>
									<div layout="row" style="padding-bottom: 30px; padding-left: 16px; padding-top: 16px;">
										<md-icon md-font-set="material-icons" style="margin-right: 32px; margin-left: 0px; padding-left: 20px; padding-right: 20px;">date_range</md-icon>
										<strong style="padding-left: 20px; padding-top: 2px;">Fecha de versión: </strong>
										<p style="padding-left: 20px; padding-top: 2px;">{{sel_version.date}}</p>
									</div>
									<md-divider></md-divider>
									<h1 class="md-display-1" style="padding-left: 20px;">Comentarios</h1>
								  <p style="padding-left: 40px; padding-bottom: 30px; padding-top:20px; "> {{sel_version.asset.comment}} </p>
								  <md-divider ></md-divider>
								  <h1 class="md-display-1" style="padding-left: 20px;">Atributos</h1>

								    <md-list-item ng-repeat="key in versionKeys" style="height:60px;">
								    	<md-icon md-font-set="material-icons" style="padding-left: 20px; padding-bottom: 20px;">settings_input_component</md-icon>
								        <strong style="padding-left: 20px; padding-bottom: 20px;"> {{key}}: </strong>
								        <p style="padding-left: 20px; padding-bottom: 20px;">{{sel_version.asset[key]}} </p>

								    </md-list-item>
										<div layout="row" style="padding-bottom: 30px; padding-left: 16px; padding-top: 16px;">
								    	<md-icon md-font-set="material-icons" style="margin-right: 32px; margin-left: 0px; padding-left: 20px; padding-right: 20px;">panorama_fish_eye</md-icon>
								    	<strong style="padding-left: 20px; padding-top: 2px;">Estado actual: </strong>
								    	<p ng-class="{'estado-final': estadoVersionFinal }" class="estado-actual" style="padding-left: 20px; padding-top: 2px; ">{{sel_version.asset.estadoActual}}</p>
								    </div>

								    <div layout="column" ng-repeat="lista in versionListas" style=" overflow: auto;">

										    <md-divider></md-divider>

										    	<h2 class="md-display-1" style="padding-left: 20px;">Lista: {{lista.name}} </h2>

										    <div style="min-height: 100px;">
													<md-list-item ng-repeat="element in versionListas.elements" style="height:60px;" >
												    	<md-icon md-font-set="material-icons" class="attributes" style="padding-left: 20px; padding-bottom: 20px;">list</md-icon>
												        <p style="padding-left: 20px; padding-bottom: 20px;">{{element.content}} </p>
													</md-list-item>

												</div>
										</div>
										<md-divider></md-divider>
										<h1 class="md-display-1" style="padding-left: 20px;">Tags</h1>
										<div style="padding-left: 16px; padding-top: 10px; ">
											<md-chips ng-model="asset.tags" readonly="true" style="padding-bottom: 30px;"></md-chips>
										</div>

										<md-divider></md-divider>
										<h1 class="md-display-1" style="padding-left: 20px;">Contacto</h1>
										<div layout="row" style="padding-bottom: 30px; padding-top: 14px;">
										  <md-icon md-font-set="material-icons" style="margin-right: 32px; margin-left: 0px; padding-left: 36px; padding-right: 20px; ">person</md-icon>
										  <strong style="padding-left: 20px; padding-top: 4px;">Nombre: </strong>
										  <p style="padding-left: 20px; padding-top: 4px;"> {{sel_version.asset.stakeholders.name}}</p>
									  </div>
									  <div layout="row" style="padding-bottom: 30px;">
										  <md-icon md-font-set="material-icons" style="margin-right: 32px; margin-left: 0px; padding-left: 36px; padding-right: 20px; ">email</md-icon>
										  <strong style="padding-left: 20px; padding-top: 4px;">Email: </strong>
										  <p style="padding-left: 20px; padding-top: 4px;"> {{sel_version.asset.stakeholders.email}}</p>
									  </div>

										<md-divider></md-divider>
										<h1 class="md-display-1" style="padding-left: 20px;">Informacion Adjunta</h1>
										<md-list-item ng-repeat="link in sel_version.asset.attached" style="height:60px;" >
										    <!--{{ d.label}}-->
										  <md-icon md-font-set="material-icons" class="attributes" style="padding-left: 20px; padding-bottom: 20px; margin-left: 0px;">attach_file</md-icon>
										  <a href="{{link}}" style="padding-left: 20px; padding-bottom: 20px;">{{link}} </a>

										</md-list-item>
								</div>
							</md-content>
						</md-tab>
					</md-tabs>

		</md-content>
	</div>
	<md-dialog-actions layout="row" >
		<md-button ng-click="hide()" ng-show="!showVersion">
			Aceptar
		</md-button>
		<md-button ng-click="confirmRestoreVersion($event, sel_version.asset)" ng-show="showVersion">
			Restaurar
		</md-button>
		<md-button ng-click="closeVersion()" ng-show="showVersion">
			Volver
		</md-button>

	</md-dialog-actions>
</md-dialog>
